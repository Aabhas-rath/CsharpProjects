<!-- body Start-->
<!--Navigation start-->
<script>
    function ProcessEachAlbum(albumId) {
        //alert("ProcessEachAlbum");
        if ((albumId != 1) && ($("#gallery" + albumId).length == 0)) {
            var galleryCarousel = "<div id=\"gallery" + albumId + "\" class=\"carousel slide\" data-ride=\"carousel\">" +
                "<ol id=\"carouselIndicators" + albumId + "\" class=\"carousel-indicators\"></ol><div id=\"carouselInner" + albumId + "\" class=\"carousel-inner my-inner\"></div>" +
                    "<a class=\"carousel-control-prev\" href=\"#gallery" + albumId + "\" role=\"button\" data-slide=\"prev\"><span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span> <span class=\"sr-only\">Previous</span>" +
                "</a><a class=\"carousel-control-next\" href=\"#gallery" + albumId + "\" role=\"button\" data-slide=\"next\"><span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span><span class=\"sr-only\">Next</span></a></div> <br/><br/>";
            $("#galleryStart").append(galleryCarousel);
            var geturl = "@Url.Action("GetfirstfourImages","Album")/" + albumId;
            var dataTarget = "data-target=\"#gallery" + albumId+"\"";
            $.getJSON(geturl, function (imageIdArray, status) {
                if (status == "success") {
                    //alert("getJSON imageIdArray");
                    var carouselIndicatorsList = [];
                    var carouselList = [];
                    var index = 1;

                    carouselIndicatorsList.push("<li " + dataTarget + " data-slide-to=\"0\" class=\"active\"></li>");

                    imageIdArray.forEach(function (imageId, imageIndex) {

                        carouselIndicatorsList.push("<li " + dataTarget + " data-slide-to=\"" + index++ + "\" ></li>");

                        if (imageIndex != 0)
                            carouselList.push("<div class=\"carousel-item\"><img class=\"d-block w-100 albumCarouselImage\" src=\"@Url.Action("getimage","images")/" + imageId + "\" alt=" + imageIndex + "></div>");
                        else
                            carouselList.push("null");

                    });
                    carouselList[0] = "<div class=\"carousel-item active\"><img class=\"d-block w-100 albumCarouselImage\" src=\"@Url.Action("getimage","images")/"+imageIdArray[0]+"\" alt=\"" + imageIdArray[0] + "\"></div>";
                    $("#carouselIndicators" + albumId).append(carouselIndicatorsList.join(''));
                    $("#carouselInner" + albumId).append(carouselList.join(''));
                }
                else {

                    $("#galleryStart").remove("#gallery" + albumId);
                    $.ajax({
                        type: "GET",
                        url: "@Url.Action("commingSoon","Home")",
                        dataType: "html",
                        success: function (response) { $("#galleryStart").html(response); },
                        failure: function (response) { $("#galleryStart").append("Comming Soon. please check back later"); }
                    });
                }
            });
        }
    };
    function loadAlbums(AlbumIdArray) {
        //alert("loadAlbums");
        AlbumIdArray.forEach(ProcessEachAlbum);
    };
    function call() {
        if ($("#galleryStart").children().length == 0) {
            //alert("call");
            $.ajax({
                type: "GET",
                url: '@Url.Action("GetAll","Album")',
                success: loadAlbums,
                failure: function () {
                    $.ajax({
                        type: "GET",
                        url: '@Url.Action("commingSoon","Home")',
                        dataType: "html",
                        success: function (response) { $("#galleryStart").html(response); },
                        failure: function (response) { $("#galleryStart").append("Comming Soon. please check back later"); }
                    });
                }
            });
            //$.get('@Url.Action("GetAll","Album")',loadAlbums);
            //alert("call");
        }
    };
    function removeDivandDisableNav(divId) {
        if ($(divId).length == 0) {
            var navElement = $("a[href:'" + divId.slice(1) + "']");
            if (navElement.next().is("br")) {
                navElement.next().remove();
                navElement.remove();
            }
            else
                navElement.remove();
        }
    };
    var modalfunc = function (e) { $('#manageAlbums .modal-body').html(''); };
    var toggleAlbumManager = function () {
        $.get('.@Url.Action("UploadFiles","Manage")', function (data) { $('#manageAlbums .modal-body').html(data); })
        $('#manageAlbums').modal('show');
    };
    $('#manageAlbums').on('hidden.bs.modal', modalfunc);

    window.onload = function () {
        var linkElements = $("a[class='nav-link text-light']");
        $.each(linkElements, function (index, element) {
            if (element.getAttribute("href") != "#")
            removeDivandDisableNav(element.attributes["href"].value);
        });

        $('#CreateAlbum').submit(function (e) {
        e.preventDefault();
        var formData = new FormData(this);
        $.ajax({
            url: this.attr('action'),
            type: "POST",
            dataType: "html",
            contentType: "multipart/form-data",
            data: formData,
            processData: false,
            success: function (result) {
                $('#result').html(result);
            },
            error: function (result) {

            }
        });
    });
    };

</script>
<nav class="navbar navbar-expand-sm bg-dark fixed-top">
    <a class="navbar-brand text-light" href="#" name="@ViewBag.Title">
        <img class="img-thumbnail" src="/images/getimage/3" />
        @ViewBag.WebsiteName
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive">
        <span class="navbar-toggler-icon navbar-light">Menu</span>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <a class="nav-link text-light" href="#">Home</a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link text-light dropdown-toggle" href="#" id="AboutDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    About
                </a>
                <div class="dropdown-menu" aria-labelledby="AboutDropdown">
                    <a class="dropdown-item" href="#introduction">Introduction</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#ideology">Ideology</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#family">Family</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#presidents">Presidents</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link text-light dropdown-toggle" href="#" id="ActivitiesDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Activities
                </a>
                <div class="dropdown-menu" aria-labelledby="ActivitiesDropdown">
                    <a class="dropdown-item" href="#blogs">Blogs of Interest</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#discussions">Discussuins</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#quiz">Quiz</a>
                </div>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" href="#whatsNew">What's New</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" href="#gallery" onclick="call()">Gallery</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" href="#downloads">Downloadables</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" href="#contactUs">Contact us</a>
            </li>
        </ul>
    </div>
</nav>
<!--Navigation end-->
<!--Start Home-->
<div id="home" style="height: 100%;padding-top: 25px;">
    @Html.Partial("home")
</div>
<!--End Home-->

<br />

<!--About us Start-->
<div id="aboutUs" class="offset">
    @Html.Partial("aboutUs");
</div>
<!--About us End-->

<br />

<!--activities Start-->
<div id="activities" class="offset">
    @Html.Partial("activities");
</div>
<!--activities End-->

<br />

<!--whatsNew Start-->
<div id="whatsNew" class="offset">
    @* @Html.Partial("whatsNew");*@
</div>
<!--whatsNew End-->

<br />

<!--gallery Start-->
<div id="gallery" class="offset">
    @Html.Partial("gallery");
</div>
<!--gallery End-->

<br />

<!--Downloads Start-->
<div id="downloads" class="offset">
    @*  @Html.Partial("downloads");*@
</div>
<!--Downloads End-->

<br />

<!--Contact us start-->
<div id="contactUs" class="offset">
    @* @Html.Partial("contactUs");*@
</div>
<!--Contact us end-->
<!-- body End-->

<div id="modalLoader" class="align-content-center" width="100%">
    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#manageAlbums" onclick="toggleAlbumManager()">
        Launch Album Manager.
    </button>

    <div class="modal fade" id="manageAlbums" tabindex="-1" role="dialog" aria-labelledby="manageAlbumsLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="manageAlbumsLabel">Album Manager</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary align-self-center">Save changes</button>
                </div>
            </div>
        </div>
    </div>

</div>




